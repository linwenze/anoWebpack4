(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{192:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var o=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}},193:function(e,t,a){var o=a(194);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a(16).default)("1a18a661",o,!0,{})},194:function(e,t,a){(e.exports=a(11)(!1)).push([e.i,"",""])},195:function(e,t){e.exports="/assets/logo.png?a020361b5da0790af3557c2f31273e47"},196:function(e,t){e.exports="/assets/login-plant-content.gif?58512748aa9c119b133856893cbfd055"},208:function(e,t,a){"use strict";a.r(t);var o,n,r=a(1),i=a(192),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}();var l=(o=Object(r.store)({namespaced:!0,state:{},mutations:{},actions:{},getters:{}}),Object(r.component)(n=o(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"data",value:function(){return{headnavdata:"",loginSure:!1,loginDisable:!1,loginData:{username:"",password:""},rules:{username:[{required:!0,message:"请输入账号",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:["blur","change"]}]},loading:!1,rememberme:!1,user:{}}}},{key:"created",value:function(){this.initData(),this.getCookie()}},{key:"mounted",value:function(){}},{key:"methods",value:function(){return{initData:function(){if(localStorage.removeItem("userInfo"),localStorage.getItem("RememberMe")){this.rememberme=!0;var e=JSON.parse(localStorage.getItem("RememberMe"));this.loginData.username=e.username}},submitForm:function(){var e=this;if(this.loginData.username)if(this.loginData.password){this.loginDisable=!0;var t=this;this.loading=!0;var a=this.loginData,o={username:a.username,psd:a.password,clientVersion:"",mac:"",verifyCode:""};this.$fetch.login.loginOld(o).then((function(t){if(0==t.status)e.$store.dispatch("error",t.msg),e.loginDisable=!1;else{e.loginSure=!0;var a=t.shareKey;e.login(a)}})).catch((function(a){0==a.status&&(e.$store.dispatch("error",a.msg),e.loginDisable=!1),a.shareKey&&t.login(a.shareKey);var o=t;setTimeout((function(){o.loading=!1}),2e3),window.location.origin.indexOf("localhost")>-1&&t.login()}))}else this.$store.dispatch("warning","请输入有效的密码");else this.$store.dispatch("warning","请输入有效的用户名")},login:function(e){var t=this,a=this.loginData,o={username:a.username,password:a.password};o.shareKey=e,this.$fetch.login.toLogin(o).then((function(a){var o=JSON.parse(localStorage.getItem("tableShowSelect"))||[];localStorage.clear(),localStorage.setItem("tableShowSelect",JSON.stringify(o)),localStorage.setItem("user_info",JSON.stringify(a.data)),document.cookie="PHPSESSID="+a.data.token+";path=/;domain="+phpHost,t.checkRemenberMe(),t.setUserLog(a),t.saveUser(a.data),t.$fetch.header.getTopMune({},!0).then((function(a){t.headnavdata=a.data,t.$store.commit("currentpath",t.headnavdata),localStorage.setItem("navtree",JSON.stringify(a.data)),t.$router.push("/home");var o=t;(setTimeout((function(){o.loading=!1}),2e3),t.loginDisable=!1,t.loginSure=!0,e)&&((sessionStorage.getItem("stay_id")?JSON.parse(sessionStorage.getItem("stay_id")):"")?console.log("不存在"):t.loginStay())}))})).catch((function(e){t.loading=!1,t.loginDisable=!1}))},loginSocket:function(e){var t=localStorage.getItem("user_login")?JSON.parse(localStorage.getItem("user_login")).token:"";try{this.socketApi.sendSock({c:"pc",m:"loginStay",params:{stay_id:e,token:t}},this.getData)}catch(e){console.log("断线了: "+e)}},loginStay:function(){var e=this;this.$fetch.login.loginStay({}).then((function(t){sessionStorage.setItem("stay_id",JSON.stringify(t.data.stay_id)),e.socketApi.initWebSocket(),e.loginSocket(t.data.stay_id),e.typeSocket()})).catch((function(e){}))},typeSocket:function(){var e=localStorage.getItem("user_login")?JSON.parse(localStorage.getItem("user_login")).token:"";try{this.socketApi.sendSock({c:"pc",m:"stay",params:{type:0,token:e,areaId:localStorage.getItem("user_login")&&JSON.parse(localStorage.getItem("user_login")).area?JSON.parse(localStorage.getItem("user_login")).area.id:"",accountId:localStorage.getItem("user_login")&&JSON.parse(localStorage.getItem("user_login")).user?JSON.parse(localStorage.getItem("user_login")).user.accountId:""}},this.getData)}catch(e){console.log("断线了: "+e)}},checkRemenberMe:function(){this.rememberme?this.setCookie(this.loginData.username,this.loginData.password,7):this.clearCookie()},setCookie:function(e,t,a){var o=new Date;o.setTime(o.getTime()+864e5*a),window.document.cookie="userName="+this.loginData.username+";path=/;expires="+o.toGMTString(),window.document.cookie="userPwd="+this.loginData.password+";path=/;expires="+o.toGMTString()},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var a=e[t].split("=");"userName"==a[0]?this.loginData.username=a[1]:"userPwd"==a[0]&&(this.loginData.password=a[1],this.rememberme=!0)}},clearCookie:function(){this.setCookie("","",-1)},loginFn:function(){this.loading=!0;var e=this.loginData;e.username,e.password},setUserLog:function(e){e.data;var t=e.data.admin;Object.assign(t,{service:e.data.service,latitude:e.data.area.latitude,longitude:e.data.area.longitude}),localStorage.setItem("user_login",JSON.stringify({expired:+new Date+864e5,token:e.data.token,user:t,cookies:e.data.cookies,area:e.data.area}))},power:function(e,t){this.num=0;var a=this;return new Promise((function(o,n){a.$fetch.header.getSubMenu({column_id:e,column_name:t},!0).then((function(e){console.log(e.data,"<><><><><>12"),o(e.data)}))}))}}}}]),t}(i.a))||n)||n),c=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("div",[t("a",{staticClass:"alike",attrs:{target:"_blank",href:"http://cst.chexiu.cn/"}},[t("img",{attrs:{src:a(195)}})])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-panel-left"},[t("img",{attrs:{src:a(196)}})])}],u=a(58);var g=function(e){a(193)},m=Object(u.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[e._m(0),e._v(" "),a("div",{staticClass:"login-panel-content"},[e._m(1),e._v(" "),a("div",{class:["login-panel",{"login-panel-lg":!1}]},[a("h2",{staticClass:"text-center text-center—title"},[e._v("欢迎登录车商通SCRM")]),e._v(" "),a("h4",[e._v("4S店客户价值提升专家")]),e._v(" "),a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginData,rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm(t)}}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{staticClass:"el-input-border",attrs:{type:"text",placeholder:"账号"},model:{value:e.loginData.username,callback:function(t){e.$set(e.loginData,"username","string"==typeof t?t.trim():t)},expression:"loginData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.loginData.password,callback:function(t){e.$set(e.loginData,"password","string"==typeof t?t.trim():t)},expression:"loginData.password"}})],1),e._v(" "),a("el-form-item",{staticClass:"remenber"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.rememberme,expression:"rememberme"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.rememberme)?e._i(e.rememberme,null)>-1:e.rememberme},on:{change:function(t){var a=e.rememberme,o=t.target,n=!!o.checked;if(Array.isArray(a)){var r=e._i(a,null);o.checked?r<0&&(e.rememberme=a.concat([null])):r>-1&&(e.rememberme=a.slice(0,r).concat(a.slice(r+1)))}else e.rememberme=n}}}),e._v("记住用户名\n        ")]),e._v(" "),a("el-form-item",{staticClass:"no-bottom"},[a("el-button",{staticClass:"form-btn",attrs:{type:"primary",loading:e.loading,disabled:e.loginDisable},on:{click:e.submitForm}},[e._v("\n            登录"),e.loginDisable?a("i",[e._v("中")]):e._e()])],1),e._v(" "),a("el-form-item",{staticClass:"margin-bottom-35"},[a("div",{staticClass:"regiest"},[a("a",{attrs:{target:"_blank",href:e.gethosts.oldHost+"/signup"}},[e._v("立即注册")]),e._v("|\n            "),a("a",{attrs:{target:"_blank",href:"http://crm2.qq.com/page/portalpage/wpa.php?uin=4008591730&aty=0&a=0&curl=&ty=1"}},[e._v("联系客服")])])]),e._v(" "),a("el-form-item",{staticClass:"copyright-box"},[a("div",{staticClass:"copyright"},[e._v("\n            ©版权所有：深圳市驱动新媒体有限公司\n            "),a("a",{attrs:{href:"http://www.chexiu.cn/",target:"_blank"}},[e._v("(www.chexiu.cn)")])])])],1)],1)])])}),c,!1,g,"data-v-28ba2ccf",null);t.default=m.exports}}]);